@charset "UTF-8";
/*------------------------------------------------------------------------------------------------*\
    Fall-Back Over Panel Pattern v1.0.0

    Designed for use with the basic [CSS Mustard Cut](https://github.com/Fall-Back/CSS-Mustard-Cut)
    IE 9+, FF 8+, Opera 12, [Chrome 29+, Android ~4.4+]
    Chrome 29+, Opera 16+, Safari 6.1+, iOS 7+, Android ~4.4+

    Any double-classing (e.g. `.class.class`) is deliberatly in place in order to increase specifity.
    This allows Start-CSS declarations to be overidden.
    E.g. `.{pattern}__open.{pattern}__open` overrides `a[href]`.

\*------------------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------------------*\
    Import Fall-Back vars:

    Slightly hacky way of allowing the main UI colour of this pattern to be:
     - base-ui colour (if set)
     - otherwise #999
     - but can be specifically overridden
\*------------------------------------------------------------------------------------------------*/
$t: #999;
@if variable-exists(fallback--base-ui-color) {
    $t: $fallback--base-ui-color;
}
$fallback--over-panel--ui-color:                   $t !default;

// Same thing for the breakpoint:
$t: 50em;
@if variable-exists(fallback--breakpoint--enhanced) {
    $t: $fallback--breakpoint--enhanced;
}
$fallback--over-panel--breakpoint--enhanced: $t !default;
/*------------------------------------------------------------------------------------------------*/


// Colours:

$fallback--over-panel--bg-color:                   $fallback--over-panel--ui-color !default;
$fallback--over-panel--color:                      #fff !default;


$fallback--over-panel__link--color:                lighten($fallback--over-panel--ui-color, 55%) !default;
$fallback--over-panel__link--color--alt:           lighten($fallback--over-panel--ui-color, 35%) !default;
$fallback--over-panel__link--bg-color:             transparent !default;
$fallback--over-panel__link--bg-color--alt:        $fallback--over-panel--ui-color !default;


$fallback--over-panel__control--color:             #fff !default;
$fallback--over-panel__control--color--alt:        $fallback--over-panel__control--color !default;
$fallback--over-panel__control--bg-color:          $fallback--over-panel--ui-color !default;
$fallback--over-panel__control--bg-color--alt:     darken($fallback--over-panel--ui-color, 10%) !default;


$fallback--over-panel__overlay--bg-color:          #fff !default;



// Sizes:

$fallback--over-panel__control--height:            ($fallback--base-em-ratio * 1.5em) !default;
$fallback--over-panel--spacing:                    ($fallback--over-panel__control--height / 8) !default;

//$fallback--over-panel__link--height:               40px !default;
//$fallback--over-panel--spacing:                    5px !default;

$fallback--over-panel--padding:                    0;


// Transitons:
$fallback--over-panel--transition-duration:        ease;
$fallback--over-panel--transition-timing-function: 0.8s;

$fallback--over-panel__overlay-transition:         opacity 0.5s ease !default;


// Other:
$fallback--over-panel__overlay-opacity:            0.5 !default;
$fallback--over-panel__overlay-shadow:             0 0 10px 5px #000 !default;

// SVG's

//$fallback--over-panel__open--svg:                 "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAyMCI+PHBhdGggZmlsbD0iIzQ0NCIgZD0iTTE5LjE0MyA4SC44NTdDLjA2NyA4IDAgOC44OTQgMCAxMGMwIDEuMTA0LjA2OCAyIC44NTcgMmgxOC4yODZjLjc5IDAgLjg1Ny0uODk2Ljg1Ny0yIDAtMS4xMDctLjA2OC0yLS44NTctMnptMCA4SC44NTdDLjA2NyAxNiAwIDE2Ljg5NCAwIDE4YzAgMS4xMDUuMDY4IDIgLjg1NyAyaDE4LjI4NmMuNzkgMCAuODU3LS44OTUuODU3LTIgMC0xLjEwNi0uMDY4LTItLjg1Ny0yek0uODU3IDRoMTguMjg2Yy43OSAwIC44NTctLjg5NS44NTctMiAwLTEuMTA2LS4wNjgtMi0uODU3LTJILjg1N0MuMDY3IDAgMCAuODk0IDAgMmMwIDEuMTA1LjA2OCAyIC44NTcgMnoiLz48L3N2Zz4=" !default;
//$fallback--over-panel__cancel--svg:               "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAyMCI+PHBhdGggZmlsbD0iIzQ0NCIgZD0iTTIwIDIuMDJMMTcuOTggMCAxMCA3Ljk4IDIuMDIgMCAwIDIuMDIgNy45OCAxMCAwIDE3Ljk4IDIuMDIgMjAgMTAgMTIuMDIgMTcuOTggMjAgMjAgMTcuOTggMTIuMDIgMTAgMjAgMi4wMnoiLz48L3N2Zz4=" !default;



/*
    THE WAY THIS WORKS

    In browsers that support transform, the over-panel is moved 100% up, thus hiding off the top of
    the page. When :target-ted, the transform is set back to 0 and the transition provides the
    sliding effect.
    However, Opera Mini and IE9 don't support transform (but do support Media Queries) so it breaks.
    In order to provide a functional fallback, I've set the initial clip state to 0 so that it's
    hidden. The :target-ted state sets the clip to be enormous (thus visible).
    This, though, breaks the slide-up effect as the clip is set back to 0 before the transition
    takes places, hiding it immediately.
    To get round this I've also transitioned the clip (on the 'closed' state only) and set a delay
    so that the clip isn't change until after the slide transition has been completed.
    Since neither of these browser support transitions either, the clip delay is ignored.

    The same principle applies to the fade effect.

*/

.over-panel .over-panel__open,
.over-panel .over-panel__close {
    display: none;
}

/* -- Enhanced layout --------------------------------------------------------------------------- */
@media only screen and (max-width: (minus1px($fallback--over-panel--breakpoint--enhanced))) {

    /*
        This extra wrapper allows the content of the panel to be absolutely positioned so that the
        container doesn't create a positioning context which would prevent the overlay from filling
        the body.
        The :target id needs to stay in actual position so the fall-back works, so everything
        affected by the :target must come after or inside the element with the id, but we want to
        allow the position of the controls to be as flexible as possible, so some trickery is
        needed.

        1. Make sure the over-panel is on top. (should be a variable).
        2. Make the over-panel invisible in a way that's transition-able.
    */
    .over-panel__wrap {
        background-color: $fallback--over-panel--bg-color;
        color: $fallback--over-panel--color;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        //overflow: auto; Not sure why I needed this.

        padding: $fallback--over-panel--padding;

        z-index: 9999; /* [1] */

        clip: rect(0, 0, 0, 0); /* [2] */
    }


    /*
        1. Extremely large clip. Can't use 'auto' or transition delay won't run.
           Can't use clip-path because of support (as in - this is for older browsers anyway)
    */
    .over-panel:target .over-panel__wrap {
        clip: rect(0, 999999px, 999999px, 0); /* [1] */
    }


    /* Slide effect: */

    .over-panel--slide .over-panel__wrap {
        -webkit-transform: translateY(-100%);
        -moz-transform:    translateY(-100%);
        -ms-transform:     translateY(-100%);
        -o-transform:      translateY(-100%);
        transform:         translateY(-100%);

        -webkit-transition: -webkit-transform $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function,
                            clip 0s $fallback--over-panel--transition-timing-function $fallback--over-panel--transition-duration;
        -moz-transition:    -moz-transform $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function,
                            clip 0s $fallback--over-panel--transition-timing-function $fallback--over-panel--transition-duration;
        -o-transition:      -o-transform $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function,
                            clip 0s $fallback--over-panel--transition-timing-function $fallback--over-panel--transition-duration;
        transition:         transform $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function,
                            clip 0s $fallback--over-panel--transition-timing-function $fallback--over-panel--transition-duration;
    }

    .over-panel--slide:target .over-panel__wrap {
        -webkit-transform: translateY(0);
        -moz-transform: translateY(0);
        -ms-transform: translateY(0);
        -o-transform: translateY(0);
        transform: translateY(0);

        -webkit-transition: -webkit-transform $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function;
        -moz-transition:    -moz-transform $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function;
        -o-transition:      -o-transform $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function;
        transition:         transform $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function;
    }


    /* Fade effect: */

    .over-panel--fade .over-panel__wrap {
        opacity: 0;

        -webkit-transition: opacity $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function,
                            clip 0s $fallback--over-panel--transition-timing-function $fallback--over-panel--transition-duration;
        -moz-transition:    opacity $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function,
                            clip 0s $fallback--over-panel--transition-timing-function $fallback--over-panel--transition-duration;
        -o-transition:      opacity $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function,
                            clip 0s $fallback--over-panel--transition-timing-function $fallback--over-panel--transition-duration;
        transition:         opacity $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function,
                            clip 0s $fallback--over-panel--transition-timing-function $fallback--over-panel--transition-duration;

    }

    .over-panel--fade:target .over-panel__wrap {
        opacity: 1;

        -webkit-transition: opacity $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function;
        -moz-transition:    opacity $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function;
        -o-transition:      opacity $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function;
        transition:         opacity $fallback--over-panel--transition-duration $fallback--over-panel--transition-timing-function;

    }


    .over-panel__wrap a {
        background-color: $fallback--over-panel__link--bg-color;
        color: $fallback--over-panel__link--color;
    }

    .over-panel__wrap a:hover,
    .over-panel__wrap a:active,
    .over-panel__wrap a:focus {
        background-color: $fallback--over-panel__link--bg-color--alt;
        color: $fallback--over-panel__link--color--alt;
    }


    /* Style the over-panel controls: */
    /*
      NOTE: this still isn't finalised and may need to be more flexible as it's quite
      subjective how these buttons should be presented in terms of position.
      Will probably not be in isolation, but as part of a navbar or similar so this does
      need some more thinking.
    */


    // Double classes to up the specificity, as the 'open' link does not have to appear inside the
    // `.over-panel` container. This is a shame and weird so re-think this
    .over-panel__open.over-panel__open,
    .over-panel__close.over-panel__close {
        color: $fallback--over-panel__control--color;
        background-color: $fallback--over-panel__control--bg-color;
        width: $fallback--over-panel__control--height;

        margin: 0;
        padding: 0 ($fallback--over-panel--spacing * 2);
        height: $fallback--over-panel__control--height;
        line-height: $fallback--over-panel__control--height;

        border: 0;
        text-decoration: none;

        text-align: center;
    }


    .over-panel__open.over-panel__open:hover,
    .over-panel__open.over-panel__open:active,
    .over-panel__open.over-panel__open:focus,
    .over-panel__close.over-panel__close:hover,
    .over-panel__close.over-panel__close:active,
    .over-panel__close.over-panel__close:focus {
        border: 0;
        text-decoration: none;
        color: $fallback--over-panel__control--color--alt;
        background-color: $fallback--over-panel__control--bg-color--alt;
    }

    .over-panel__open.over-panel__open {
        display: block;
    }

    /*
        Fix for Opera Mini vertical centering:
    */
    //_:-o-prefocus, body:last-child .over-panel__open,
    //_:-o-prefocus, body:last-child .over-panel__close {
    //    line-height: 2.8 !important;
    //}

    /* Hide the open control: */
    /*
        Taking this out for now is leaving it visible doesn't seem to hurt (though accessiblity?)
        but hiding it can cause other elements to jump around due to flexbox.
        Maybe use visibility, not sure.
    */
    /*.over-panel:target .over-panel__open.over-panel__open {
        display: none;
    }*/

    /* Show the close control and move on above the overlay: */
    .over-panel:target .over-panel__close.over-panel__close {
        z-index: 1002; /* @var */
        display: block;
        position: absolute;
        top: 0;
        right: 0;
    }



    /* Size and position the overlay, but send it to the back: */

    .over-panel__overlay.over-panel__overlay {
        display: block;
        position: absolute;
        z-index: -1;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
        border: 0;
        text-decoration: none;


        background: $fallback--over-panel__overlay--bg-color;
        opacity: 0;

        -webkit-transition: $fallback--over-panel__overlay-transition;
           -moz-transition: $fallback--over-panel__overlay-transition;
             -o-transition: $fallback--over-panel__overlay-transition;
                transition: $fallback--over-panel__overlay-transition;

        -webkit-box-shadow: $fallback--over-panel__overlay-shadow;
                box-shadow: $fallback--over-panel__overlay-shadow;
    }

    /* Bring the overlay to the front and fade in when there's an over-panel target: */
    .over-panel:target .over-panel__overlay {
        z-index: 1001; /* @var */
        opacity: $fallback--over-panel__overlay-opacity;
    }

    .over-panel__overlay.over-panel__overlay:hover,
    .over-panel__overlay.over-panel__overlay:active,
    .over-panel__overlay.over-panel__overlay:focus {
        border: 0;
        text-decoration: none;
        background: $fallback--over-panel__overlay--bg-color;
    }
}

/* ---------------------------------------------------------------------------------------------- */