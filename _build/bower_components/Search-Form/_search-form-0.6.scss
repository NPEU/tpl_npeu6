@charset "UTF-8";
/*------------------------------------------------------------------------------------------------*\
    Fall-Back Search Form Pattern v0.6

    Design for use with the basic [CSS Mustard Cut](https://github.com/Fall-Back/CSS-Mustard-Cut)
    IE 9+, FF 8+, Opera 12, [Chrome 29+, Android ~4.4+]
    Chrome 29+, Opera 16+, Safari 6.1+, iOS 7+, Android ~4.4+
    
    ISSUES
    
    Firefox 8-27 are the main problem-causers here because of a buggy/incomplete flexbox
    implementation. Below 28 FF doesn't suport felx-wrap even though it supports un-prefixed
    flexbox properties.
    The reason this is a problem is that in the basic view flex wrapping is required to force the
    search input + button onto a different line from the collapsable area.
    Using hacks to prevent 8-27 using flexbox for the basic view, and more hacks to reinstate it
    for 28+.

\*------------------------------------------------------------------------------------------------*/

// Colours:

// Slightly hacky way of allowing the main UI colour of this pattern to be:
// - base-ui colour (if set)
// - otherwise #999
// - but can be specifically overridden
$t: false;
@if variable-exists(fallback--base-ui-color) {
    $t: $fallback--base-ui-color;
} @else {
    $t: #999;
}
$fallback--search-form--ui-color:              $t !default;

$fallback--search-form--bg-color:              $fallback--search-form--ui-color !default;//lighten($fallback--search-form--ui-color, 60%) !default;

$fallback--search-form__field--bg-color:       #fff !default;
$fallback--search-form__field--bg-color--alt:  #ffffdc !default;

$fallback--search-form__submit--bg-color:      lighten($fallback--search-form--ui-color, 30%) !default;// lighten($fallback--search-form--ui-color, 70%) !default;
$fallback--search-form__submit--bg-color--alt: darken($fallback--search-form__submit--bg-color, 10%) !default;

$fallback--search-form__cancel--bg-color:      lighten($fallback--search-form--ui-color, 20%) !default;
$fallback--search-form__cancel--bg-color--alt: darken($fallback--search-form__cancel--bg-color, 10%) !default;


// Sizes:

$fallback--search-form--font-size:             $fallback--base-font-size !default;
$fallback--search-form--field-height:          $fallback--base-em-ratio * 1em !default;
$fallback--search-form--spacing:               $fallback--search-form--field-height / 8 !default;
$fallback--search-form--height:                $fallback--search-form--field-height + ($fallback--search-form--spacing * 2) !default;

$fallback--search-form__cancel--size:          1em !default;
//$fallback--search-form--height:               $fallback--base-line-height * 1.5em;//1.71428571429em; //($fallback--base-em-ratio * 2em) !default; // 3.42857142858

//$fallback--search-form--spacing:              ($fallback--search-form--height / 8) !default;


// Breakpoints:

$fallback--search-form--breakpoint--enhanced:  50em !default;
//$fallback--search-form--breakpoint--enhanced:  720px !default;


// SVG's

$fallback--search-form__cancel--svg:           "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAyMCI+PHBhdGggZmlsbD0iIzQ0NCIgZD0iTTIwIDIuMDJMMTcuOTggMCAxMCA3Ljk4IDIuMDIgMCAwIDIuMDIgNy45OCAxMCAwIDE3Ljk4IDIuMDIgMjAgMTAgMTIuMDIgMTcuOTggMjAgMjAgMTcuOTggMTIuMDIgMTAgMjAgMi4wMnoiLz48L3N2Zz4=" !default;


// Fall-Back PNG's:

$fallback--search-form__submit--png:           "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABTklEQVQ4T6VT21GDQBTNAv9qBaEDSQUij3+pQNMBnUgHagXJPw+3A0kFxg5SAA/P2VlmFtw4ZmQmA7t377nnsREr40mSJMfyEb9Ab7fjOBZ1Xb+Z58xvwUUYhtee570bjcvzbdd191LK07KgAOI4boUQt5j2hWXe933Lfdd1yaRAbY13W1XV5geApv3MZjQGyylkByAOWA/DsG2a5nUmwZieQevephVnHgCws7EQYDCyCRpvbBq1Rz48+uQ3ZCjZ0/N/gEskwKcDZE4RKxIiiqInx3FeUDzCxM0ZEz/ggW81cRHjEQdz+HHgPnQzWsbo26YrBtokRiV5F2wpsFnXJMAzk+XMUcohgwmIjWTA7JGWBPgdo0R9W5alumwzANv0ac+8UAA9ASRDpPLPAARK0zRAM5lccU1TLwJgE6SEePGPt1JMfqN9rqajLwCw/wY2tMxY4fByDwAAAABJRU5ErkJggg==" !default;


// MQ hacks:
$fallback--ie9--hack:                          "all and (min-width:0\0) and (min-resolution: .001dpcm)" !default;

/* -- Basic/fallback layout --------------------------------------------------------------------- */

    /*
        NOTES:

        .search-form--after
        It's not possible to easily re-create this variation so it won't be after in
        non-flexbox browsers, but that's ok, it's still usable.
        IE 8 and 9 are forced into submission for this.

        Nesting is to increase specificity.
        This helps to override things link Normalize and Cleanse.

    */

    /* -- .search-form ---------------------------------------------------------------------------*/

    /*
        1. Prevent extra bottom space when form is inside a container.
    */
    .search-form {
        background: $fallback--search-form--bg-color;

        display: -moz-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        
        margin: 0;
        
        width: 100%;

        -webkit-flex-wrap: wrap;
            -ms-flex-wrap: wrap;
                flex-wrap: wrap;

        vertical-align: top;
    }
    // Reset flex display for FF8-27: ...
    @media screen and (min--moz-device-pixel-ratio:0) and (min-resolution:.001dpcm) {
        .search-form {
            display: block;
        }
    }
    // ... and put it back for FF28+
    @supports (-moz-appearance:none) and (list-style-type:japanese-formal) {
        .search-form {
            display: flex;
        }
    }


    .search-form::before,
    .search-form::after {
        content: " ";
        display: table;
    }

    .search-form::after {
        clear: both;
    }

    ///* IE7- hacks (can't use MQ else IE8's Respond applies it): */
    //.search-form {
    //    *zoom: 1;
    //    *padding-bottom: 5px;
    //}

        /* -------------------------------------------------------------------------------------------*/

        /* -- .search-form__cancel -------------------------------------------------------------------*/

        .search-form .search-form__cancel {
            display: none;
        }

        /* -------------------------------------------------------------------------------------------*/

        /* -- .search-form__field --------------------------------------------------------------------*/

        /*
            1. This to override normalize.
            2. Overrize deafault size attr value - mainly for Opera mini which wierdley needs both 
               width AND min-width.

            @TODO - box-sizing got a little jumbled somewhere.
            Either I need to stick with content-box and adjust to the height to take into account
            the padding, or I need to enforce border-box. The problem wwith this is that the class isn't
            of a high-enough specifiity to override Normalise's setting of content-box.
            Oddly, FF doesn't seem to make a difference - only Chrome.
            UPDATE - enforced border-box (not using normalize anyway now).
        */
        
        .search-form .search-form__field {
            -webkit-appearance: none !important; /* [1] */
            //-webkit-border-radius: 0px;
            border-radius: 0px;
            border: 0;
            //-webkit-box-sizing: content-box;
            -moz-box-sizing: border-box !important;
            box-sizing: border-box !important;

            background-color: $fallback--search-form__field--bg-color;
            height: $fallback--search-form--field-height;
            line-height: $fallback--search-form--field-height;
            margin: $fallback--search-form--spacing 0 $fallback--search-form--spacing $fallback--search-form--spacing;
            padding: $fallback--search-form--spacing;

            float: left;

            -moz-box-flex: 1;
            -webkit-flex: 1 1 auto;
                -ms-flex: 1 1 auto;
                    flex: 1 1 auto;
                    
            
            width: 1%; /* [2] */
            min-width: 1%; /* [2] */
                    
            ///* IE7- hacks (box-model height correction): */
            //*height: $fallback--search-form--height / 2;
            //*line-height: $fallback--search-form--height / 2;
        }
        
        // Reset the width for FF8-27: ...
        @media screen and (min--moz-device-pixel-ratio:0) and (min-resolution:.001dpcm) {
            .search-form .search-form__field {
                width: auto;
            }
        }
        // ... and put it back for FF28+:
        @supports (-moz-appearance:none) and (list-style-type:japanese-formal) {
            .search-form .search-form__field {
                width: 1%;
            }
        }

        .search-form .search-form__field:focus {
            background-color: $fallback--search-form__field--bg-color--alt;
        }

        .search-form--right .search-form__field, /* @deprecated - use after */
        .search-form--after .search-form__field {
            -moz-box-ordinal-group: 2;
                     -webkit-order: 2;
                    -ms-flex-order: 2;
                             order: 2;
        }
        


        /*
            Opera Hacks (https://github.com/jeffclayton/css_hack_testing/blob/master/opera_9.5-12_hack.txt)
            Opera Mini 7- ignores line height.
            Opera Mini 8 seems to enforce a minimum font size for the search field which forces it to be
            higher than it should be.
            min-height and no padding seems to fix it.
        */
        /*_:-o-prefocus, body:last-child .search-form .search-form__field {
            padding: 0;
            min-height: $fallback--search-form--height;
        }*/


    /* -------------------------------------------------------------------------------------------*/

    /* -- .search-form__submit -------------------------------------------------------------------*/

    /*
        //1. IE 6/7 needs this.
    */
    .search-form .search-form__submit {
        -webkit-appearance: none;
        border-radius: 0;
        border: 0;
        //-webkit-box-sizing: content-box;
        -moz-box-sizing: content-box;
        box-sizing: content-box;

        background: $fallback--search-form__submit--bg-color;

        height: $fallback--search-form--height;
        line-height: 0;
        //*line-height: 1.5; /* [1] */

        margin: $fallback--search-form--spacing $fallback--search-form--spacing $fallback--search-form--spacing 0;
        padding:  0 ($fallback--search-form--spacing * 2);

        float: left;

        -moz-box-flex: 0;
        -webkit-flex: 0 0 auto;
            -ms-flex: 0 0 auto;
                flex: 0 0 auto;
    }

    .search-form .search-form__submit:hover,
    .search-form .search-form__submit:focus {
        background-color: $fallback--search-form__submit--bg-color--alt;
    }
  

    .search-form--right .search-form__submit, /* @deprecated - use after */
    .search-form--after .search-form__submit {
         //-moz-box-ordinal-group: 2;
         -webkit-order: 2;
        -ms-flex-order: 2;
                 order: 2;
    }


        .search-form .search-form__submit svg {
            height: $fallback--search-form--field-height;
            width: $fallback--search-form--field-height;
        }


    /* PNG Fall-Back */
    .no-inlinesvg.datauri .search-form .search-form__submit:before {
        content: url($fallback--search-form__submit--png);
        //vertical-align: middle;
    }

    .no-inlinesvg.datauri .search-form .search-form__submit span {
        display: none;
    }


    /* -------------------------------------------------------------------------------------------*/

    /* -- .search-form__collapse -----------------------------------------------------------------*/

    .search-form .search-form__collapse {

        list-style-type: none;
        padding: 0;
        margin: 0;
        float: left;


        -moz-box-flex: 0;
        -webkit-flex: 0 0 auto;
            -ms-flex: 0 0 auto;
                flex: 0 0 auto;
    }

    /* -------------------------------------------------------------------------------------------*/



    ///* IE8 hacks: */
    //@media \0screen {
    //
    //    .search-form--right .search-form__submit,
    //    .search-form--right .search-form__field {
    //        float: right;
    //    }
    //
    //    .search-form--right .search-form__field {
    //        margin-left: -340px; /* @var */
    //        margin-right: 20px; /* @var */
    //    }
    //}

    /* IE9 hacks: */
    @media all and (min-width:0\0) and (min-resolution: .001dpcm)
    {
        .search-form--right .search-form__submit, /* @deprecated - use after */
        .search-form--right .search-form__field,  /* @deprecated - use after */
        .search-form--after .search-form__submit, /* @deprecated - use after */
        .search-form--after .search-form__field {
            float: right;
        }

        .search-form--right .search-form__field, /* @deprecated - use after */
        .search-form--after .search-form__field {
            margin-left: -340px; /* @var */
            margin-right: 20px; /* @var */
        }

    }



/* -- Enhanced layout --------------------------------------------------------------------------- */
    @media only screen and (max-width: (minus1px($fallback--search-form--breakpoint--enhanced))) {

        .search-form--right .search-form__submit, /* @deprecated - use after */
        .search-form--right .search-form__field, /* @deprecated - use after */
        .search-form--after .search-form__submit,
        .search-form--after .search-form__field {
            float: left;
        }

        .search-form--right .search-form__field, /* @deprecated - use after */
        .search-form--after .search-form__field {
            margin-left: $fallback--search-form--spacing;
            margin-right: 0;
        }

        .search-form .search-form__collapse {
            width: 100%;
        }


        /*.no-flexbox .search-form {
            display: block;
        }*/
    }

    @media only screen and (min-width: $fallback--search-form--breakpoint--enhanced) {

        /*
            1. Reinstate all flexbox for enhanced view as no wrapping needs to occure
            (FF8-27 issue describbed above)
        */
        .search-form {
            display: -moz-box; /* [1] */
            display: flex; /* [1] */

            -webkit-flex-wrap: nowrap;
                -ms-flex-wrap: nowrap;
                    flex-wrap: nowrap;
        }
        
        /*.search-form {
            width: 100%;
            display: -moz-box;
            display: flex;
        }

            .search-form .search-form__field {
                -moz-box-flex: 1;
                flex: 1 1 auto;
            }

            .search-form .search-form__submit {
                -moz-box-flex: 0;
                flex: 0 0 auto;
            }

            .search-form .search-form__collapse {
                -moz-box-flex: 0;
                flex: 0 0 auto;
            }

            .search-form .search-form__cancel {
                -moz-box-flex: 0;
                flex: 0 0 auto;
                -moz-box-ordinal-group: 0;
                order: 0;
            }
        */

            .search-form--right .search-form__field, /* @deprecated - use after */
            .search-form--right .search-form__submit,
            .search-form--after .search-form__field, /* @deprecated - use after */
            .search-form--after .search-form__submit {/* @deprecated - use after */
                -moz-box-ordinal-group: 2;
                order: 2;
            }
        


        .search-form .search-form__cancel {
            //display: none;

            background-color: $fallback--search-form__cancel--bg-color;
            padding-right: $fallback--search-form--spacing * 2;
            padding-left: $fallback--search-form--spacing * 2;
            padding-top: 0;
            padding-bottom: 0;
            border: 0;

            height: $fallback--search-form--field-height + ($fallback--search-form--spacing * 4);
            line-height: $fallback--search-form--field-height + ($fallback--search-form--spacing * 4);

            -moz-box-flex: 0;
            -webkit-flex: 0 0 auto;
                -ms-flex: 0 0 auto;
                    flex: 0 0 auto;

            -moz-box-ordinal-group: 0;
             -webkit-order: -1;
            -ms-flex-order: -1;
                     order: -1;
        }

        .search-form .search-form__cancel:hover,
        .search-form .search-form__cancel:focus,
        .search-form .search-form__cancel:active {
            background-color: $fallback--search-form__cancel--bg-color--alt;
            border: 0;
        }

        .search-form .search-form__cancel:after {
            content: url($fallback--search-form__cancel--svg);
            display: inline-block;
            vertical-align: text-bottom;
            //vertical-align: middle;
            width: $fallback--search-form__cancel--size;

            /* IE10-11 flexbox chokes without width: */
            /*width:  20px;*/
            /* IE11 flexbox stretches icon without height: */
            /*height:  20px;*/
            /* But now blink pushes the icon to the bottom without line-height: 0. */
            line-height: 0;
        }

        .search-form .search-form__field {
            width: auto;
        }

        /*
            Expander
            Note the selector appears not to work on FF27-. That's ok. Won't fix.
        */
        .search-form .search-form__field:focus ~ .search-form__collapse {
            display: none;
        }

        /*
            Cancel button
            Note: only necessary on some touch devices where it can be difficult to un-focus.
        */
        .search-form .search-form__field:focus ~ .search-form__cancel {
            display: block;
        }

        /*
            Expander issue:
            Collapse block is hidden but search field doesn't expand so it looks weird.
            Affects: browsers that DON'T support flexbox, but DO support :focus ~ selector.
                IE9 - had to use hack - see below.
                FF3.5 - 21 (note - look into using the -moz prefix for flexbox in this case for 8+)
                Safari6 (CSS Cut-off won't load CSS for this browser so shouldn't be an issue any more)



            --Modernizr adds the .flexbox class. If JS unavailable, expanding doesn't work.
            That's ok, but I may as well just have used JS to make the expanding working the first
            place!!!!??? :-(--

            If no-flexbox, undo Expander and Cancel.
            Note, without JS the issue described above will still occur, but it's still usable.

        */
        .no-flexbox .search-form__field:focus ~ .search-form__collapse {
            display: block;
        }

        .no-flexbox .search-form__field:focus ~ .search-form__cancel {
            display: none;
        }


        .search-form .search-form__collapse {
            width: auto;
        }
   
    }


    ///* IE8 hacks: */
    ///*
    //    Respond:
    //    Expander issue: Collapse block is hidden but search field doesn't expand so it looks weird.
    //*/
    //@media \0screen {
    //   .search-form__field:focus ~ .search-form__collapse {
    //        display: block;
    //    }
    //}

    /* IE9 hacks: */
    /*
        Expander issue: Collapse block is hidden but search field doesn't expand so it looks weird.
    */
    @media #{$fallback--ie9--hack} {
            .search-form .search-form__field:focus ~ .search-form__collapse {
                display: block;
            }

            .search-form .search-form__field:focus ~ .search-form__cancel {
                display: none;
            }
    }



    /*
    Older webkit browsers - those supporting the -webkit-box-flex syntax (Chrome 21-28, Maxthon)
    - don't let the flex declarations override floats properly, so the the floats applied above
    cause serious breakage, so we need to undo those floats.
    Also the vertical centering of the cancel icon doesn't work properly, so we provide a fix
    for that too.
    Applies to newer webkit too, but works just as well. Mainly this prevents IE10 from
    applying this (where the cancel icon styling fails).
    However, older webkit (Safari, Android) baulk at this so following are some hacks to reset the float.
    Horrid but haven't found a better way yet.
    Can't use JS to detect these either, as it's totally broken if JS isn't available.

    */
    /* no longer applies due to CSS Cutt-off
    @media screen and (-webkit-min-device-pixel-ratio: 0) {
        .search-form__submit,
        .search-form__field,
        .search-form__collapse {
            float: none;
        }

        .search-form__cancel:after {
            display: table-cell;
            height: 40px;
            height: 4rem;
        }
    }*/

    /* Android 2.3+ and Safari 3-4 */
    /*@media screen and (min-width: 0\-) {
        .search-form__submit,
        .search-form__field,
        .search-form__collapse {
            float: left;
        }
    }*/

    /* iOS (iOS Safari 3.2+), Android (Base browser 2.1+ & Chrome 22+, Opera Mobile 10+) */
    /*@media screen and (-webkit-min-device-pixel-ratio:1.1) {
        .search-form__submit,
        .search-form__field,
        .search-form__collapse {
            float: left;
        }
    }*/

/* ---------------------------------------------------------------------------------------------- */