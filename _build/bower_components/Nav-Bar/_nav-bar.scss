@charset "UTF-8";
/*------------------------------------------------------------------------------------------------*\
    Fall-Back Nav Bar Pattern v1.0.0

    Designed for use with the basic [CSS Mustard Cut](https://github.com/Fall-Back/CSS-Mustard-Cut)
    IE 9+, FF 8+, Opera 12, [Chrome 29+, Android ~4.4+]
    Chrome 29+, Opera 16+, Safari 6.1+, iOS 7+, Android ~4.4+

    Any double-classing (e.g. `.class.class`) is deliberatly in place in order to increase specifity.
    This allows Start-CSS declarations to be overidden.
    E.g. `.{pattern}__open.{pattren}__open` overrides `a[href]`.

\*------------------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------------------*\
    Import Fall-Back vars:

    Slightly hacky way of allowing the main UI colour of this pattern to be:
     - base-ui colour (if set)
     - otherwise #999
     - but can be specifically overridden
\*------------------------------------------------------------------------------------------------*/
$t: #999;
@if variable-exists(fallback--base-ui-color) {
    $t: $fallback--base-ui-color;
}
$fallback--nav-bar--base-ui-color:         $t !default;

// Do the same for the base text colour: ...
$t: #333;
@if variable-exists(fallback--base-text-color) {
    $t: $fallback--base-text-color;
}
$fallback--nav-bar--base-text-color:       $t !default;

// ... and the background colour:
$t: #fff;
@if variable-exists(fallback--base-background-color) {
    $t: $fallback--base-background-color;
}
$fallback--nav-bar--base-background-color: $t !default;

// Same thing for the breakpoint:
$t: 50em;
@if variable-exists(fallback--breakpoint--enhanced) {
    $t: $fallback--breakpoint--enhanced;
}
$fallback--nav-bar--breakpoint--enhanced: $t !default;
/*------------------------------------------------------------------------------------------------*/


// Colours:

$fallback--nav-bar--bg-color:              $fallback--nav-bar--base-ui-color !default;

$fallback--nav-bar__link--color:           #fff !default;
$fallback--nav-bar__link--color--alt:      $fallback--nav-bar__link--color !default;
$fallback--nav-bar__link--bg-color:        $fallback--nav-bar--bg-color !default;
$fallback--nav-bar__link--bg-color--alt:   darken($fallback--nav-bar--base-ui-color, 10%) !default;

$fallback--nav-bar__link--border-color:    rgba(0,0,0,0.2) !default;
$fallback--nav-bar__link--border-style:    solid !default;
$fallback--nav-bar__link--border-width:    1px !default;


$fallback--sub-nav--bg-color:              darken($fallback--nav-bar--base-ui-color, 20%) !default;


$fallback--sub-nav__link--color:           $fallback--nav-bar__link--color !default;
$fallback--sub-nav__link--color--alt:      $fallback--sub-nav__link--color !default;
$fallback--sub-nav__link--bg-color:        $fallback--sub-nav--bg-color !default;
$fallback--sub-nav__link--bg-color--alt:   lighten($fallback--sub-nav__link--bg-color, 10%) !default;


$fallback--nav-bar__title--bg-color:       $fallback--nav-bar--bg-color !default;

// Sizes:
$fallback--nav-bar--font-size:             $fallback--base-font-size !default;
$fallback--nav-bar--height:                ($fallback--base-em-ratio * 1.5em) !default;
//$fallback--nav-bar--height:                40px !default;
$fallback--nav-bar--spacing:               ($fallback--nav-bar--height / 8) !default;
//$fallback--nav-bar--spacing:               5px !default;
$fallback--nav-bar--margin-bottom:         0 !default;
$fallback--nav-bar__title--padding:        0 !default;

$fallback--nav-bar___open--size:           0.64285714285em !default;//$fallback--nav-bar--spacing * 2 !default;
$fallback--nav-bar___cancel--size:         1em !default;


// SVG's

//////$fallback--nav-bar__open--svg:            "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9ICIwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCI+PHBhdGggZmlsbD0iIzQ0NCIgZD0iTTAgNWwxMCAxMEwyMCA1SDB6Ii8+PC9zdmc+" !default;

//$fallback--nav-bar__open--svg:            "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAyMCI+PHBhdGggZmlsbD0iIzQ0NCIgZD0iTTAgNWwxMCAxMEwyMCA1SDB6Ii8+PC9zdmc+" !default;
////$fallback--nav-bar__open--svg:            'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="#444" d="M0 5l10 10L20 5H0z"/></svg>' !default;

//$fallback--nav-bar__cancel--svg:          "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAyMCI+PHBhdGggZmlsbD0iIzQ0NCIgZD0iTTIwIDIuMDJMMTcuOTggMCAxMCA3Ljk4IDIuMDIgMCAwIDIuMDIgNy45OCAxMCAwIDE3Ljk4IDIuMDIgMjAgMTAgMTIuMDIgMTcuOTggMjAgMjAgMTcuOTggMTIuMDIgMTAgMjAgMi4wMnoiLz48L3N2Zz4=" !default;


// Fall-Back PNG's:

//$fallback--nav-bar__open--png:            "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAMAAABLuo1aAAAAD1BMVEUAAAD///////////////+PQt5oAAAABHRSTlMAcH+PMsL1QgAAACBJREFUeAFjYGKBAiYGIBvGArIhLDBgZmFhBFIQNpgFAA5pAGWVT5gDAAAAAElFTkSuQmCC" !default;

//$fallback--nav-bar__cancel--png:          "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFuSURBVDiN7ZG/asJQFMa/e3MzKDgEN4c7pEP/rHmBO/gKN2icO3SrYPsQHYqvoGALYsF2Kzj4Ek23ELq4GYpLiBftYAKS3ITSrn7jPef87jnfB5z0X5H8Q7vd5gBulVL3y+VS6YaEEIwx9gBguFgsvo5rVNPfB9BnjE2EEKwENsn68vUC0LKsAYAJANc0zWfHccysJqU0GGMjAC4hZKaUusvPF07OBqMoGgHoEUJm6/Xas217F0XRGIBHCJltt9uuzhItMHeaC2CaPrsApkqpXpm/pcD8pgBQtVkmXSiVn242m8oljLKCEIIlSfIEoIPDyR8AZK1WO+ecz8Mw3P0aKKU0kiQZA+ikaXrNZvMljuMzAF3DMK4sy5qvVqsCtABMfSuk6fv+3nGc1xTaqdfrlzpoAdhqtR4BXOOQpnccgO/7e875G6X0Ij2/EQTBeyXQtu1PAFBK3ejSDMNwxzmfU0obAIZBEHzrbDvp7/oBTO6g1QDr8X4AAAAASUVORK5CYII=" !default;

// Transitions:

$fallback--sub-nav---transition:          margin-top 0.5s ease !default;


// Other:
$fallback--nav-bar__title--font-size:     1.5em !default;
$fallback--nav-bar__title--font-style:    normal !default;
$fallback--nav-bar__title--font-weight:   bold !default;
$fallback--nav-bar__title--font-family:   Arial, Helvetica, sans-serif !default;

// Calculate title heights based on IT'S font size:
$fallback--nav-bar__title--height: (($fallback--base-line-height * 1.5) / (($fallback--nav-bar__title--font-size / 1em) * $fallback--base-font-size) * 1em);


// MQ hacks:
// https://jeffclayton.wordpress.com/2014/07/22/internet-explorer-css-hacks-collection/
// 0\0 encoded to preserve hack.
$fallback--ie9--hack: "all and (min-width: \0030\005C\0030) and (min-resolution: .001dpcm)" !default;

/* -- Basic/fallback layout --------------------------------------------------------------------- */


    /* -- .nav-bar -------------------------------------------------------------------------------*/

    .nav-bar {
        background-color: $fallback--nav-bar--bg-color;
        //--@include fallback-rem(margin-bottom, $fallback--nav-bar--margin-bottom);

        // Have no recollection why this is needed:
        // It forces the nav-bar to remain visible (though empty) on small screens. Not good, but
        // may have fixed other things so keep as reminder
        //--@include fallback-rem(min-height, $fallback--nav-bar--height);
    }

    /* Not sure why I need float clearing here. Keep for reference. */
    /*.nav-bar::before,
    .nav-bar::after,
    .nav-bar .nav-bar__inner::before,
    .nav-bar .nav-bar__inner::after {
        content: " ";
        display: table;
    }

    .nav-bar::after,
    .nav-bar .nav-bar__inner::after {
        clear: both;
    }*/

    ///* IE7- hacks (can't use MQ or IE8 Respond applies it): */
    //.nav-bar {
    //    *zoom: 1;
    //}

    /* -------------------------------------------------------------------------------------------*/

    /* -- .nav-bar__title-section ----------------------------------------------------------------*/

    /*
        1. For IE 9 and FF 21-.
    */
    .nav-bar .nav-bar__title-section {
        white-space: nowrap; /* [1] */
        vertical-align: top; /* [1] */
        //--@include fallback-rem(min-height, $fallback--nav-bar--height);

        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;

        /*display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;*/

        -webkit-box-pack: justify;
        -webkit-justify-content: space-between;
        -ms-flex-pack: justify;
        justify-content: space-between;

        /*-webkit-box-pack: justify;
           -ms-flex-pack: justify;
         justify-content: space-between;*/
    }

        /*
            1. For IE 9 and FF 21-.
        */
        .nav-bar .nav-bar__title-text {
            vertical-align: top; /* [1] */

            background: $fallback--nav-bar__title--bg-color;
            display: inline-block;
            // Not sure what this was for causes problems for top-bar layouts:
            //width: 100%;

            height: $fallback--nav-bar__title--height;
            line-height: $fallback--nav-bar__title--height;

            font-family: $fallback--nav-bar__title--font-family;
            font-weight: $fallback--nav-bar__title--font-weight;
            font-style: $fallback--nav-bar__title--font-style;
            font-size: $fallback--nav-bar__title--font-size;
        }

        .nav-bar .nav-bar__title-text .nav-bar__link {
            height: $fallback--nav-bar__title--height;
            line-height: $fallback--nav-bar__title--height;
        }


    @media only screen and (max-width: $fallback--nav-bar--breakpoint--enhanced) {
        /*
            Apply the table-cell hack to IE9.
        */
        _::selection, .nav-bar__title-section > * {
            display: table-cell\0 !important;
            width: 1px\0;
        }
        // Note this isn't very robust:
        _::selection, .nav-bar__title-section > div {
            display: table-cell\0 !important;
            width: 100%\0;
            text-align: center;
        }
        /*
            Without flexbox positioning doesn't sort itself out, so use text-align to position
            the title.
        */
        /* If there's no control to the left: */
        _::selection, .nav-bar__title-section > div:first-child {
            text-align: left;
        }
        /* If there's no control to the right */
        _::selection, .nav-bar__title-section > div:last-child {
            text-align: right;
        }


        /*
            Apply hacks for old FF.
        */
        _:-moz-tree-row(hover), .nav-bar__title-section {
            display: -moz-box;
            -moz-box-pack: justify;
            width: 100%;
            text-align: center;
        }

        _:-moz-tree-row(hover), .nav-bar__title-section >  div {
            -moz-box-flex: 1;
        }
    }

    /* -- .nav-bar__inner ------------------------------------------------------------------------*/

    /*
        1. Duplicating parent background-color here. There HAS to be a colour here for the pattern
           to work, the parent background-color is there to allow things to be NOT BROKEN on
           browsers that don't support HTML semantic elements.
    */
    .nav-bar .nav-bar__inner {
        background-color: $fallback--nav-bar--bg-color;
        overflow: hidden;
    }



    ///* IE7- hacks (can't use MQ or IE8 Respond applies it): */
    //.nav-bar__inner {
    //    *zoom: 1;
    //}

    /* -------------------------------------------------------------------------------------------*/


    /* -- .nav-bar__button -----------------------------------------------------------------------*/
    /* Unused? */
    /*.nav-bar__button {
        -webkit-appearance: none;
        border-radius: 0;
        margin: 0;
        padding: 0;
        background: #ddd;
        border: none;
        @include fallback-rem(height, $fallback--nav-bar--height);
    }

    .nav-bar__button:hover,
    .nav-bar__button:active,
    .nav-bar__button:focus {
        background-color: #ccc;  /* @var *
    }
    */
    /* -------------------------------------------------------------------------------------------*/


    /* -- .nav-bar__items -------------------------------------------------------------------------*/
    .nav-bar .nav-bar__items {
        //width: 100%;< Can't remember what this was for. Opera Mini?
        list-style-type: none;
        padding: 0;
        margin: 0;
        float: left;

        -webkit-box-flex: 0;
            -webkit-flex: 0 1 auto;
                -ms-flex: 0 1 auto;
                    flex: 0 1 auto;
    }

        .nav-bar .nav-bar__item {
            margin: 0;
        }


        /*.nav-bar .nav-bar__item:not(:first-child) {
            border-style: $fallback--nav-bar__link--border-style;
            border-color: $fallback--nav-bar__link--border-color;
            border-left-width: $fallback--nav-bar__link--border-width;
        }

        .nav-bar .nav-bar__item:last-child {
            border-right-width: $fallback--nav-bar__link--border-width;
        }*/

    /* -------------------------------------------------------------------------------------------*/

    /* -- .subnav --------------------------------------------------------------------------------*/

    .nav-bar .subnav {
        list-style-type: none;
        padding: 0;
        margin: 0 $fallback--nav-bar--spacing 0 ($fallback--nav-bar--height / 2);
        background-color: $fallback--sub-nav--bg-color;

        // OSX/iOS needs this:
        min-height: $fallback--nav-bar--height;

    }

    .nav-bar .subnav::before,
    .nav-bar .subnav::after {
        content: " ";
        display: table;
    }

    .nav-bar .subnav::after {
        clear: both;
    }

    .nav-bar .subnav__item {
        margin: 0;
        float: left;
    }

    ///* IE7- hacks (can't use MQ or IE8 Respond applies it): */
    //.subnav__item {
    //    *float: none;
    //    *display: inline;
    //    *zoom: 1;
    //}


    /* -------------------------------------------------------------------------------------------*/


    /* -- .nav-bar__link, .subnav__link ----------------------------------------------------------*/

    .nav-bar .nav-bar__link,
    .nav-bar .subnav__link,
    .nav-bar .subnav__heading {
        display: block;
        margin: 0;
        padding: ($fallback--nav-bar--spacing * 1.333333) ($fallback--nav-bar--spacing * 2);
        border: 0;
        //height: $fallback--nav-bar--height;
        //line-height: $fallback--nav-bar--height;
    }

    .nav-bar .nav-bar__link:hover,
    .nav-bar .nav-bar__link:active,
    .nav-bar .nav-bar__link:focus,
    .nav-bar .subnav__link:hover,
    .nav-bar .subnav__link:active,
    .nav-bar .subnav__link:focus {
        border: 0;
    }

    .nav-bar__title-text .nav-bar__link {
        padding-top: 0;
        padding-bottom: 0;
    }

    /*
        Fix for Opera Mini vertical centering:
        (affects Opera 12.10-16 as well)
    */
    _:-o-prefocus, body:last-child .nav-bar .nav-bar__link,
    _:-o-prefocus, body:last-child .nav-bar .subnav__link,
    _:-o-prefocus, body:last-child .nav-bar .subnav__heading {
        line-height: 1.71428571429 !important;
    }

    .nav-bar .nav-bar__link {
        color: $fallback--nav-bar__link--color;
        background-color: $fallback--nav-bar__link--bg-color;
    }

    .nav-bar .nav-bar__link .icon {
        display: none;
    }

    .nav-bar .subnav__heading {
        color: $fallback--nav-bar__link--color;
    }

    .nav-bar .subnav__link {
        display: inline-block;
        color: $fallback--sub-nav__link--color;
        background-color: $fallback--sub-nav__link--bg-color;
    }


    /*
        Don't allow the usual interaction effects on ALL nav-bar links:
        (this is to allow submenu heading links to appear as a non-link)
    */
    .nav-bar .nav-bar__link:hover,
    .nav-bar .nav-bar__link:focus,
    .nav-bar .nav-bar__link:active,
    .nav-bar .subnav__link:hover,
    .nav-bar .subnav__link:focus,
    .nav-bar .subnav__link:active {
        text-decoration: none;
        outline: 0;
    }

    /*
        Provide interaction effects for nav-bar links that ARE links:
        (this excludes submenu heading links - note that submenu links should never also be
        submenu heading links)
    */
    .nav-bar .nav-bar__link:hover,
    .nav-bar .nav-bar__link:focus,
    .nav-bar .nav-bar__link:active {
        color: $fallback--nav-bar__link--color--alt;
        background-color: $fallback--nav-bar__link--bg-color--alt;
    }

    .nav-bar .subnav__link:hover,
    .nav-bar .subnav__link:focus,
    .nav-bar .subnav__link:active {
        color: $fallback--sub-nav__link--color--alt;
        background-color: $fallback--sub-nav__link--bg-color--alt;
    }


    /*.nav-bar [href$="#"].nav-bar__link {
        /* Override link hover effect - we want this to not look like a link in basic mode: *
        background-color: transparent;
        cursor: default;
    }*/


    /*.nav-bar .subnav__heading + .subnav__open {
        display: none;
    }*/


    /*.nav-bar .subnav__open::before {
        content: attr(data-content);
        display: inline-block;
    }*/


    .nav-bar .subnav__cancel,
    .nav-bar .subnav__open {
        display: none;
    }


    ///* IE7- hacks (can't use MQ or IE8 Respond applies it): */
    //.subnav__heading {
    //    *display: block;
    //}

    //.subnav__open--fake {
    //    *display: none;
    //}

/* -----------------------------------------------------------------------------------------------*/



/* -- Enhanced layout --------------------------------------------------------------------------- */
    @media only screen and (min-width: $fallback--nav-bar--breakpoint--enhanced) {

        /*
        */
        .nav-bar {
            position: relative;
            z-index: 1000; /* @var */

            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
        }

        /*
            Set flex-grow for immediate children to help with things like top-bar combinations
            (search form won't grow otherwise).
        */
        .nav-bar > * {
            -webkit-flex: 1 0 auto;
                -ms-flex: 1 0 auto;
                    flex: 1 0 auto;
        }

        .nav-bar .nav-bar__title-section {
            -webkit-flex: 0 0 auto;
                -ms-flex: 0 0 auto;
                    flex: 0 0 auto;
        }

        /*.nav-bar .nav-bar__inner {
            -webkit-flex: 1 0 auto;
                -ms-flex: 1 0 auto;
                    flex: 1 0 auto;
        }*/


        /*
            Apply table-cell hack to all FF because -moz-box in FF12- doesn't honour
            `position:relative` and applying the table-cell hack to everything causes other
            problems.
        */
        _:-moz-tree-row(hover), .nav-bar > * {
            display: table-cell;
            width: 100%;
        }
        _:-moz-tree-row(hover), .nav-bar .nav-bar__title-section {
            display: table-cell;
            width: 1px;
        }

        /*
            Apply the table-cell hack to IE9.
        */
        _::selection, .nav-bar > * {
            display: table-cell\0;
            width: 100%\0;
        }
        _::selection, .nav-bar .nav-bar__title-section {
            display: table-cell\0;
            width: 1px\0;
        }


        /*
            Remove table hack properties for browsers that support flexbox AND @supports.
            Note, we're only interested in FF here, as other browsers already have flexbox properties
            applied if they support it, so in this case the following is only relevent for FF22+
            (below that FF will still use the table hack as applied above).
        */
        @supports (display: flex) {
            .nav-bar > *,
            .nav-bar .nav-bar__title-section {
                display: block;
                width: auto;
            }
        }

        /*
            Add dividers.
            Dividers created by adding right borders to nav-bar__items.
        */
        .nav-bar .nav-bar__item {
            border-style: $fallback--nav-bar__link--border-style;
            border-color: $fallback--nav-bar__link--border-color;
            border-width: 0;
            border-right-width: $fallback--nav-bar__link--border-width;
        }

        /*
            If there's a title section, add a left border to the first item too.
        */
        .nav-bar .nav-bar__title-section + * .nav-bar__item:first-child {
            border-left-width: $fallback--nav-bar__link--border-width;
        }

        /**/
        .nav-bar .nav-bar__item {
            float: left;
        }


        .nav-bar .nav-bar__link .icon {
            display: inline;
        }

        .nav-bar .has-subnav > .nav-bar__link {
            float: left;
        }

        /*
            Allow interaction effects for ALL nav-bar links now we're wide enough to show the nav-bar
            enhanced version.
        */
        .nav-bar .nav-bar__link:hover,
        .nav-bar .nav-bar__link:focus,
        .nav-bar .nav-bar__link:active {
            background-color: $fallback--nav-bar__link--bg-color--alt;
            cursor: pointer;
        }


        .nav-bar .subnav {
            position: absolute;
            /*display: none;/**/
            visibility: hidden;
            left: 0;
            right: 0;
            //--@include fallback-rem(padding-right, $fallback--nav-bar--height);
            top: 0;
            z-index: -1;
            padding: 0;
            margin: 0;
            padding: 0;

            // OSX/iOS needs this:
            height: $fallback--nav-bar--height;

            -webkit-transition: margin-top 0.5s ease;
               -moz-transition: margin-top 0.5s ease;
                 -o-transition: margin-top 0.5s ease;
                    transition: margin-top 0.5s ease;
        }

        .nav-bar .subnav__heading {
            display: none;
        }


        .nav-bar .subnav__link {
            white-space: nowrap;

            /*OLD-webkit-transition: margin-top 0.5s ease;
               -moz-transition: margin-top 0.5s ease;
                 -o-transition: margin-top 0.5s ease;
                    transition: margin-top 0.5s ease;*/
        }


        .nav-bar .subnav__open {
            display: block;
        }

        .nav-bar .subnav__open::before {
            content: attr(data-content);
            display: inline-block;
        }

        /*.nav-bar .subnav__open:focus + .subnav .subnav__link,
        .nav-bar .subnav__link:focus {
            margin-top: $fallback--nav-bar--height;
        }*/
        .nav-bar .subnav:target {
            visibility: visible;
            margin-top: $fallback--nav-bar--height;
        }

        /*
            Fixes cancel button behaviour if not using overflow:hidden on .nav-bar__inner
            (Maybe be temp - I can't quite remember what the overflow:hidden was for.
            May have been a float-clearing thing but may not need this now?)
        */
        /*.nav-bar .subnav__cancel:focus,
        .nav-bar .subnav__cancel:active {
            margin-top: 0;
        }*/


        /*.nav-bar .subnav__item {
            float: none;
            display: table-cell;
        }*/

        /*
            1. Make background transparent so transition looks smoother.
        */
        .nav-bar .subnav__cancel {
            display: block;/**/
            visibility: hidden; /**/
            position: absolute;
            right: 0;
            top: 0;
            margin-top: 0;
            //width: $fallback--nav-bar--height;
            //@include fallback-rem(width, $fallback--nav-bar--height);
            z-index: -1;

            background: transparent; /* [1] */

            -webkit-transition: $fallback--sub-nav---transition;
               -moz-transition: $fallback--sub-nav---transition;
                 -o-transition: $fallback--sub-nav---transition;
                    transition: $fallback--sub-nav---transition;
        }


        /*.nav-bar .subnav__cancel:focus {
            margin-top: 0;
        }*/

        /*.nav-bar .subnav__open:focus ~ .subnav__cancel {
            margin-top: $fallback--nav-bar--height;
        }*/
        .nav-bar .subnav:target ~ .subnav__cancel {
            visibility: visible;
            margin-top: $fallback--nav-bar--height;
        }


        /* @micropattern:pseudo-dataicon-middle */
        /*
        .nav-bar .subnav__open::after,
        .nav-bar .subnav__cancel::after {
            /* These styles are enough for modern FF to V-center the icon: *
            display: inline-block;
            vertical-align: middle;

            //width: 12px;

            /* IE10-11 flexbox chokes without width: *
            //@include fallback-rem(width, ($fallback--nav-bar--height / 2 ));
            /* IE11 flexbox stretches icon without height: *
            //@include fallback-rem(height, ($fallback--nav-bar--height / 2 ));
            /* But now blink pushes the icon to the bottom without line-height: 0. *
            line-height: 0;
        }
        */

        /*
        .nav-bar .subnav__open::after {
            width: $fallback--nav-bar___open--size;
        }

        .nav-bar .subnav__cancel::after {
            width: $fallback--nav-bar___cancel--size;
        }

        .nav-bar .subnav__open::after {
            content: url($fallback--nav-bar__open--svg);
        }

        .nav-bar .subnav__cancel::after {
            content: url($fallback--nav-bar__cancel--svg);
        }
        */

        /*.nav-bar .subnav__open--fake::after {
            margin-left: $fallback--nav-bar--spacing * 2;
        }*/

        /*.subnav__open svg,
        .subnav__cancel svg {
            vertical-align: text-bottom;
        }*/

    }


    ///* IE8 hacks: */
    ///*
    //    min-width in place for Respond-friendliness
    //    (maybe not, PNG fallbacks shouldn't be JS dependant unless it doesn't matter)
    //*/
    //@media \0screen and (min-width: 600px) {
    //    .subnav {
    //        width: 100%;
    //    }
    //
    //     /* @micropattern:pseudo-dataicon-middle-ie8 */
    //    .subnav__open:after {
    //       content: url($fallback--nav-bar__open--png);
    //        /* Positioning tweaks: */
    //        text-align: center;
    //        line-height: 1;
    //    }
    //
    //    .subnav__cancel:after  {
    //        content: url($fallback--nav-bar__cancel--png);
    //    }
    //}


    /* IE9 hacks: */
    /*
    */
    @media #{$fallback--ie9--hack} {
        /*
            The icons force a massive height increase for some reason.
            Setting the height to this only works fine because on 'wide' the nav-bar can't be
            allowed to be double-lined or it breaks, and on 'narrow' the icons are hidden.
        */

        .nav-bar .subnav__open,
        .nav-bar .subnav__cancel {
            height: $fallback--nav-bar--height;
        }


        //.nav-bar .subnav__cancel::after,
        .nav-bar .subnav__open::after {
            /* Increase icon width due to odd cropping, then rescale down: */
            width: 1rem;
            -ms-transform: scale(0.5);
        }

        .nav-bar .subnav__cancel::after {
            /* Increase icon width due to odd cropping, then rescale down: */
            width: 1.1rem;
            -ms-transform: scale(0.8);
        }
    }

/* -----------------------------------------------------------------------------------------------*/


/* ---------------------------------------------------------------------------------------------- */



/* -- Fit layout -------------------------------------------------------------------------------- */
    // We only want these adjustments on wider screens:
    @media only screen and (min-width: $fallback--nav-bar--breakpoint--enhanced) {
        .nav-bar--fit {}

            .nav-bar--fit .nav-bar__items {
                width: 100%;

                display: -webkit-flex;
                display: -ms-flexbox;
                display: flex;

                -webkit-justify-content: space-around;
                          -ms-flex-pack: distribute;
                        justify-content: space-around;
            }


            .nav-bar--fit .nav-bar__item {
                -webkit-flex: 0 0 auto;
                    -ms-flex: 0 0 auto;
                        flex: 0 0 auto;
                text-align: center;
                // Borders don't really work in this scenario:
                border: 0;
            }

            .nav-bar--fit .has-subnav {
                display: -webkit-flex;
                display: -ms-flexbox;
                display: flex;
                -webkit-justify-content: center;
                          -ms-flex-pack: center;
                        justify-content: center;
            }
    }

/* -----------------------------------------------------------------------------------------------*/

/*
    These classes help control the layout in the nav-bar__title-section.

    There are different ways to achieve these layouts with pros and cons to each.
    There are also differences in possible behaviours so there's no right/wrong way.
    E.g. A title section and a single menu opener control could be laid out with either the title
    seciton centered in the width of the whole nav-bar, or centered in the remaining space
    available after decducting the width of the control:

       |-----TITLE-----| (no control)
    A: |-----TITLE---|=| (control does not affect centering)
    B: |----TITLE----|=| (control affects centering)

    B can be acheived easily with flexbox, as can other layouts, which basically govern themselves
    based on which elements are in place:

    DEFAULT (no class):

    |TITLE----------| (no control elements)
    |=|--------TITLE| (control element before title)
    |TITLE--------|=| (control element after title)
    |=|---TITLE---|=| (two control elements)

    RELATIVELY CENTERED (centered on remaining space)

    .nav-bar__title-section--relatively-centered {
        margin: 0 auto;
    }

*/

.nav-bar__title-section--relatively-centered {
    margin: 0 auto;
}